"use client"
var Rr=Object.create;var se=Object.defineProperty;var Tr=Object.getOwnPropertyDescriptor;var Lr=Object.getOwnPropertyNames;var Mr=Object.getPrototypeOf,Vr=Object.prototype.hasOwnProperty;var t=(e,r)=>se(e,"name",{value:r,configurable:!0});var Er=(e,r)=>{for(var s in r)se(e,s,{get:r[s],enumerable:!0})},We=(e,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Lr(r))!Vr.call(e,o)&&o!==s&&se(e,o,{get:()=>r[o],enumerable:!(n=Tr(r,o))||n.enumerable});return e};var $=(e,r,s)=>(s=e!=null?Rr(Mr(e)):{},We(r||!e||!e.__esModule?se(s,"default",{value:e,enumerable:!0}):s,e)),jr=e=>We(se({},"__esModule",{value:!0}),e);var nt={};Er(nt,{SharedCodeViewer:()=>wr,accessor:()=>$e,componentName:()=>pe,createInferencer:()=>Sr,dataProviderFromResource:()=>Q,dotAccessor:()=>de,getAccessorKey:()=>Ne,getFieldableKeys:()=>ie,getOptionLabel:()=>Le,getVariableName:()=>Ve,idQuoteWrapper:()=>Ee,isIDKey:()=>Te,jsx:()=>ke,noOp:()=>Me,prettyString:()=>J,printImports:()=>Re,removeRelationSuffix:()=>w,shouldDotAccess:()=>ce,toPlural:()=>K,toSingular:()=>H});module.exports=jr(nt);var R=$(require("react")),re=require("@refinedev/core");var Or=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,Dr=/^(\w|\d|_|-|)*?(name|label){1}$/i,ie=t((e,r)=>{let s=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"],o=Object.keys(r).filter(l=>Dr.test(l));s.push(...o),Or.test(e)&&s.unshift("url");let i=s.find(l=>l in r&&!!r[l]);if(i)return i==="firstName"&&"lastName"in r?["firstName","lastName"]:i},"getFieldableKeys");var Ze=require("@refinedev/core");function ye(e,r,s){if(r)return r;let n=s==null?void 0:s.find(i=>i.name===e),o=(0,Ze.pickNotDeprecated)(n==null?void 0:n.meta,n==null?void 0:n.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"}t(ye,"pickDataProvider");var Q=t(e=>{var r;return(r=e==null?void 0:e.options)==null?void 0:r.dataProviderName},"dataProviderFromResource");var he=t(e=>{let r=[...e].filter(Boolean).sort((s,n)=>(n.priority||0)-(s.priority||0))[0];return r||null},"pickInferredField");var Ue=$(require("prettier/standalone")),Ge=$(require("prettier/parser-typescript"));var xe=t(e=>{try{return Ue.default.format(e,{parser:"typescript",plugins:[Ge.default],arrowParens:"always",trailingComma:"all",semi:!0,tabWidth:4,printWidth:80})}catch(r){return console.warn("Formatting error in inferencer",r),e}},"prettierFormat");var qe=t(e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`),"prettySpaces");var Ie=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,Ye=t((e,r)=>{let s=Ie.test(e),n=typeof r=="string"||typeof r=="number",o=Array.isArray(r)&&r.every(i=>typeof i=="string"||typeof i=="number");return s&&n||s&&o?{key:e,relation:!0,multiple:o,type:"relation",priority:1}:!1},"relationInfer");var w=t(e=>e.replace(Ie,""),"removeRelationSuffix");var J=t(e=>w(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),"prettyString");var be=$(require("pluralize"));var H=t((e="")=>be.default.isSingular(e)?e:be.default.singular(e),"toSingular");var ve=$(require("pluralize"));var K=t((e="")=>ve.default.isPlural(e)?e:ve.default.plural(e),"toPlural");var we=t(e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(o=>!o.trim().startsWith("export default")).join(`
`),"replaceExports");var Qe=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,zr=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Hr=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,Fe=t((e,r={})=>{let s=e.matchAll(Qe),n=new Set;for(let o of s){let[,i,l,c,f]=o;if(f in r){let u=r[f];if(f==="react")continue;i&&n.add(`const { default: ${i} } = ${u};`),l&&n.add(`const${l.replace(Hr,"$1: $3$4")} = ${u};`),c&&n.add(`const ${c} = ${u};`)}}return qe(`
    ${Array.from(n).join(`
`)}
    ${e.replace(Qe,"").replace(zr,"")}
    `)},"replaceImports");var ae=$(require("pluralize"));var Ce=t((e,r)=>e?r.find(n=>{let o=w(e.key);return n.name===o||n.name===(ae.default.isPlural(o)?o:ae.default.plural(o))||n.name===(ae.default.isSingular(o)?o:ae.default.singular(o))}):void 0,"resourceFromInferred");var Je=$(require("pluralize"));var pe=t((e,r,s="Inferred")=>{let n=e.replace(/[^a-zA-Z0-9]/g," "),o=Je.default.singular(n),l=J(o).replace(/ /g,"")||s,c=r.charAt(0).toUpperCase()+r.slice(1);return/^[a-zA-Z]/.test(l)?`${l}${c}`:`${c}${l}`},"componentName");var Kr=t(e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"","handleExpression"),ke=t((e,...r)=>e.reduce((n,o,i)=>`${n}${o}${Kr(r[i])}`,"").trim(),"jsx");var Ae=t((e,r)=>`
    ${e??""}
    
    render(typeof ${r} !== "undefined" ? <${r} /> : <></>);
    `,"prepareLiveCode");var Se=t(e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,""),"removeHiddenCode");var _r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,ce=t(e=>_r.test(e),"shouldDotAccess");function Pe(e,r,s){let n=`${e}`;return r&&(n+="?.",ce(r)?n+=r:n+=`['${r}']`),s&&(n+="?.",ce(s)?n+=s:n+=`['${s}']`),n}t(Pe,"accessorSingle");function Br(e,r,s){return(s??[]).map(o=>Pe(e,r,o))}t(Br,"accessorMultiple");var $e=t((e,r,s,n=' + " " + ')=>Array.isArray(s)?n?Br(e,r,s).join(n):Pe(e,r,s[0]):Pe(e,r,s),"accessor"),de=t((e,r,s)=>{let n=e;return r&&(n+=`.${r}`),s&&(Array.isArray(s)?n+=`.${s[0]}`:n+=`.${s}`),n},"dotAccessor"),Ne=t(e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${de(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`,"getAccessorKey");var Re=t(e=>{let r=e.reduce((n,[o,i,l])=>(n[i]||(n[i]=[]),n[i].includes(o)||(l?n[i].push([o,!0]):n[i].push(o)),n),{});return Object.entries(r).map(([n,o])=>{let i=o.find(u=>Array.isArray(u)&&u[1]),l=o.filter(u=>typeof u=="string"),c=i?`${i[0]}`:"",f=l.length?`{ ${l.join(", ")} }`:"";return`import ${c}${c&&f?", ":""}${f} from "${n}";`})},"printImports");var Wr=/^id$/i,Te=t(e=>Wr.test(e),"isIDKey");var Le=t(e=>{var r;return e.relationInfer&&(r=e.relationInfer)!=null&&r.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":""},"getOptionLabel");var Me=t(e=>{},"noOp");var Ve=t((e,r="")=>{if(Number.isInteger(Number(e)))return r.charAt(0).toLowerCase()+r.slice(1)+e;let n=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),o=J(n).replace(/ /g,"");return`${o.charAt(0).toLowerCase()+o.slice(1)}${r.charAt(0).toUpperCase()+r.slice(1)}`},"getVariableName");var _=t((e,r,s)=>{if(r&&s&&e){let n=e?r[e]:{},i=[...s,"default"].reduce((l,c)=>l??(n==null?void 0:n[c]),void 0);if(i)return i}},"pickMeta");var Ee=t(e=>e===void 0?e:typeof e=="string"?`"${e}"`:e,"idQuoteWrapper");var Xe=t(e=>{let r=t((s,n,o,i=r,l)=>{let c=e.map(u=>u(s,n,o,i,l));return he(c)},"fieldInferencer");return r},"composeInferencers");var er=t(e=>t((s,n,o,i,l,c)=>e.reduce((f,u)=>u(f,n,o,i,l,c),s),"fieldTransformer"),"composeTransformers");var rr=t((e,r,s,n,o)=>{let i=Array.isArray(r),l=Array.isArray(r)&&r.every(c=>typeof c=="string"||typeof c=="number");if(i){if(!l){let f=n(e,r[0],s,n,o);return f?{...f,key:e,multiple:!0,priority:1}:!1}let c=n(e,r[0],s,n,o)||{type:"string"};return{key:e,multiple:!0,priority:1,type:c==null?void 0:c.type}}return!1},"arrayInfer");var tr=t((e,r)=>typeof r=="boolean"?{key:e,type:"boolean"}:!1,"booleanInfer");var je=$(require("dayjs"));var Zr=/(_at|_on|At|On|AT|ON)(\[\])?$/,Ur=["/",":","-","."],nr=t((e,r)=>{let s=Zr.test(e)&&(0,je.default)(r).isValid(),n=typeof r=="string"&&(0,je.default)(r).isValid();return typeof r=="string"&&Ur.some(i=>r.includes(i))&&(s||n)?{key:e,type:"date",priority:1}:!1},"dateInfer");var Gr=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,or=t((e,r)=>typeof r=="string"&&Gr.test(r)?{key:e,type:"email",priority:1}:!1,"emailInfer");var qr=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,sr=t((e,r)=>typeof r=="string"&&qr.test(r)?{key:e,type:"image",priority:2}:!1,"imageInfer");var ir=t((e,r)=>typeof r>"u"||r===null?null:!1,"nullishInfer");var ar=t((e,r)=>{let s=typeof r=="string"&&r.length>0,n=!Number.isNaN(Number(r));return s&&n||typeof r=="number"?{key:e,type:"number"}:!1},"numberInfer");var pr=/id$/i,cr=t((e,r,s,n,o)=>{let i=r!==null,l=!Array.isArray(r);if(i&&l&&typeof r=="object"){let f=Object.keys(r).length===1&&pr.test(Object.keys(r)[0]),u=Object.keys(r).some(y=>pr.test(y));if(f)return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let g=ie(e,r);if((g?g.length>0:!1)&&g){let y=g&&Array.isArray(g)?g[0]:g,d=n(y,r[y],r,n,o);if(d){let F=Array.isArray(g)?g.map(T=>d.accessor?`${T}.${Array.isArray(d.accessor)?d.accessor[0]:d.accessor}`:T):d.accessor?Array.isArray(d.accessor)?`${g}.${d.accessor[0]}`:`${g}.${d.accessor}`:g;return(d==null?void 0:d.type)==="text"&&(o==="create"||o==="edit")&&u?{key:e,type:"relation",relation:!0,accessor:"id",priority:1}:{...d,fieldable:!0,key:e,accessor:F,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1},"objectInfer");var lr=t((e,r)=>typeof r=="string"&&r.length>100?{key:e,type:"richtext",priority:1}:!1,"richtextInfer");var fr=t((e,r)=>typeof r=="string"?{key:e,type:"text"}:!1,"textInfer");var Yr=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,dr=t((e,r)=>typeof r=="string"&&Yr.test(r)?{key:e,type:"url",priority:1}:!1,"urlInfer");var ur=[rr,tr,nr,or,sr,ir,ar,cr,Ye,lr,fr,dr];var mr=t((e,r,s,n)=>e.map(i=>{if(!i.relation&&(i.type==="text"||i.type==="richtext"||i.type==="number")&&!i.canRelation){let l=/^[a-z0-9-]+$/,c=t(y=>l.test(`${y}`),"isValidUUID"),f=i.key.toLowerCase()!=="id";return!(!i.accessor||typeof i.accessor=="string")||!f?i:(i.multiple?n[i.key]:[n[i.key]]).every(y=>c(i.accessor?y[i.accessor]:y))?{...i,canRelation:!0}:i}return i}),"basicToRelation");var Qr=/(image|photo|avatar|cover|thumbnail|icon)/i,gr=t(e=>e.map(s=>s.type==="url"&&Qr.test(s.key)?{...s,type:"image"}:s),"imageByKey");var yr=t((e,r)=>e.map(n=>{let o=Ce(n,r);return o?{...n,relation:!0,type:"relation",resource:o}:n}),"relationByResource");var hr=t((e,r,s,n,o,i)=>e.map(c=>{if(c.relation&&c.type==="relation"&&!c.resource){let f=c.accessor?n[c.key][c.accessor]:n[c.key],u=o(c.key,f,n,o,i);if(u&&u.type!=="relation")return{...c,fieldable:!0,relation:!1,type:u.type,canRelation:!0}}return c}),"relationToFieldable");var xr=[gr,yr,hr,mr];var j=$(require("react")),Jr=$(require("@refinedev/core")),Xr=$(require("graphql-tag")),ue=require("@aliemir/react-live");var Ir=[["react","React",j.default],["@refinedev/core","RefineCore",Jr],["graphql-tag","GraphqlTag",Xr]],Oe=j.default.createContext({}),De=t(({fetchError:e,code:r,additionalScope:s,errorComponent:n})=>{let o=(r&&we(Fe(r,[...Ir,...s??[]].reduce((c,[f,u,g,P])=>P?c:{...c,[f]:u},{}))))??"",i=j.default.useMemo(()=>({React:j.default,...j.default,...[...Ir,...s??[]].reduce((c,[f,u,g])=>({...c,[u]:g}),{})}),[s]),l=j.default.useMemo(()=>t(()=>{let{error:f}=j.default.useContext(Oe);return n?j.default.createElement(n,{error:f?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${f}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},"LiveErrorComponent"),[n,e]);return j.default.createElement(ue.LiveProvider,{Context:Oe,code:o,scope:i,noInline:!0},!e&&j.default.createElement(ue.LivePreview,{Context:Oe}),j.default.createElement(l,null))},"LiveComponent");var a=$(require("react")),me=$(require("prism-react-renderer")),vr=$(require("prism-react-renderer/themes/vsDark"));var wr=t(({code:e,loading:r})=>{let s=a.default.useMemo(()=>xe(e??""),[e]),[n,o]=a.default.useState(!1),[i,l]=a.default.useState(!1),[c,f]=a.default.useState(!1),[u,g]=a.default.useState(!1),[P,y]=a.default.useState(!1);return a.default.useEffect(()=>{if(!r){let d=setTimeout(()=>{o(!0)},300);return()=>{clearTimeout(d)}}return()=>{}},[r]),a.default.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 449px)");d.matches?f(!1):f(!0);let F=t(()=>{d.matches?f(!1):f(!0)},"handleResize");return window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}}return()=>{}},[]),a.default.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 1280px)");d.matches?g(!0):g(!1);let F=t(()=>{d.matches?g(!0):g(!1)},"handleResize");return window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}}return()=>{}},[]),s&&!r?a.default.createElement(a.default.Fragment,null,c&&a.default.createElement("div",{className:"refine-inferencer--code-viewer",style:{position:"sticky",bottom:"24px",paddingTop:"24px",left:0,right:0,width:"100%",zIndex:10,display:"flex",justifyContent:"center",transition:"all 0.2s ease",opacity:n&&!i?1:0,transform:n&&!i?"translateY(0)":"translateY(100px)"}},a.default.createElement("div",{style:{width:"calc(100% - calc(64px * 2))",maxWidth:"1080px",padding:"20px",backgroundColor:"#1A1A1A",boxShadow:"0px 4px 16px -4px rgba(0, 0, 0, 0.5), 0px 8px 32px -8px rgba(0, 0, 0, 0.35)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:u?"column":"row",gap:"12px"}},a.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"}},a.default.createElement("div",null,a.default.createElement(rt,null)),a.default.createElement("div",{style:{fontSize:"14px",lineHeight:"20px",color:"#ffffff"}},a.default.createElement("p",{style:{padding:0,margin:0}},"Most of the page code is auto-generated by the"," ",a.default.createElement("span",{style:{textDecoration:"underline"}},"Inferencer")," ","feature, based on your backend data structure."),a.default.createElement("p",{style:{padding:0,margin:0}},"While this is an excellent way to experiment with refine,"," ",a.default.createElement("span",{style:{fontWeight:600}},"it's not intended to be used on production.")))),a.default.createElement("div",null,a.default.createElement("button",{onPointerEnter:()=>y(!0),onPointerLeave:()=>y(!1),onClick:()=>l(!0),style:{appearance:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:P?"scale(1.025)":void 0,filter:P?"brightness(1.1)":void 0}},a.default.createElement(Fr,{style:{flexShrink:0}}),a.default.createElement("span",null,"Show the auto-generated code"))))),a.default.createElement(et,{visible:i,onClose:()=>l(!1),code:s})):null},"SharedCodeViewer"),et=t(({visible:e,onClose:r,code:s=""})=>{let n=a.default.useRef(null),[o,i]=a.default.useState(!1),[l,c]=a.default.useState(!1),[f,u]=a.default.useState(!1),[g,P]=a.default.useState(!1);a.default.useEffect(()=>{if(typeof document<"u"){let p=t(m=>{n.current&&!n.current.contains(m.target)&&r()},"onOutsideClick");return document.addEventListener("pointerdown",p),()=>{document.removeEventListener("pointerdown",p)}}return()=>{}},[r]);let y=t(()=>{typeof navigator<"u"&&(navigator.clipboard.writeText(s),i(!0),setTimeout(()=>{i(!1)},1e3))},"onCopy"),d=a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},a.default.createElement("div",{style:{fontWeight:700,fontSize:"20px",lineHeight:"32px",color:"#0D0D0D"}},"Auto-generated code by Inferencer"),a.default.createElement("button",{onClick:r,onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),style:{flexShrink:0,appearance:"none",border:"none",background:"none",padding:0,margin:0,outline:"none",borderRadius:"50px",width:"32px",height:"32px",cursor:"pointer",transition:"all 0.15s ease",transform:f?"scale(1.05)":void 0,filter:f?"brightness(0.8)":void 0}},a.default.createElement(tt,null))),F=a.default.createElement("div",{style:{fontSize:"13px",borderRadius:"8px",flex:"1",overflow:"scroll",background:"#1E1E1E"}},a.default.createElement(me.default,{...me.defaultProps,theme:vr.default,code:s,language:"tsx"},({className:p,style:m,tokens:I,getLineProps:O,getTokenProps:D})=>a.default.createElement("pre",{className:p,style:{...m,padding:"14px 14px 14px 14px",margin:"0",width:"100%",boxSizing:"border-box"}},I.map((N,A)=>a.default.createElement("div",{key:A,...O({line:N,key:A})},N.map((S,C)=>a.default.createElement("span",{key:C,...D({token:S,key:C})})))))));return a.default.createElement("div",{className:"refine-inferencer--code-viewer-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"all 0.2s ease",opacity:e?1:0,pointerEvents:e?"all":"none",display:"flex",justifyContent:"center",alignItems:"center"}},a.default.createElement("div",{ref:n,style:{transform:e?"scale(1) translateY(0px)":"scale(0) translateY(-200px)",transition:"all 0.25s cubic-bezier(.35,1.29,.81,1.08)",transitionDelay:"0.25",width:"calc(100% - calc(32px * 2))",height:"calc(100% - calc(32px * 2))",backgroundColor:"#fff",maxWidth:"640px",maxHeight:"720px",borderRadius:"8px",padding:"16px"}},a.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",gap:"16px"}},d,F,a.default.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",gap:"16px"}},a.default.createElement("button",{onPointerEnter:()=>c(!0),onPointerLeave:()=>c(!1),onClick:y,style:{appearance:"none",height:"40px",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",position:"relative",overflow:"hidden",transition:"filter 0.2s ease",transform:l?"scale(1.025)":"scale(1)",filter:l?"brightness(1.1)":void 0}},a.default.createElement(br,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),a.default.createElement("span",null,"Copy Generated Code"),a.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",transition:"all 0.2s ease",transform:o?"translateY(0)":"translateY(40px)"}},a.default.createElement(br,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),a.default.createElement("span",null,"Copied!"))),a.default.createElement("a",{onPointerEnter:()=>P(!0),onPointerLeave:()=>P(!1),href:"https://refine.dev/docs/packages/documentation/inferencer",target:"_blank",rel:"noreferrer",style:{appearance:"none",textDecoration:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 128, 255, 0.1)",color:"#0080FF",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:g?"scale(1.025)":void 0,filter:g?"brightness(1.1)":void 0}},a.default.createElement(Fr,{style:{flexShrink:0}}),a.default.createElement("span",null,"Learn more about inferencer"))))))},"CodeModal"),rt=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...e},a.default.createElement("path",{fill:"#0080FF",fillRule:"evenodd",d:"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10Zm0-15a1.25 1.25 0 1 0 0 2.5A1.25 1.25 0 0 0 10 5Zm0 10c.69 0 1.25-.56 1.25-1.25V10a1.25 1.25 0 1 0-2.5 0v3.75c0 .69.56 1.25 1.25 1.25Z",clipRule:"evenodd"})),"InfoIcon"),Fr=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},a.default.createElement("path",{fill:"currentColor",d:"M5 2a1 1 0 0 1 0 2H4v8h8v-1a1 1 0 1 1 2 0v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1Z"}),a.default.createElement("path",{fill:"currentColor",d:"M9 2a1 1 0 0 0 0 2h1.586L6.293 8.293a1 1 0 0 0 1.414 1.414L12 5.414V7a1 1 0 1 0 2 0V3a1 1 0 0 0-1-1H9Z"})),"OpenIcon"),tt=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e},a.default.createElement("path",{fill:"#A6A6A6",fillRule:"evenodd",d:"M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16Zm-2.586-21.414a2 2 0 1 0-2.828 2.828L13.172 16l-2.586 2.586a2 2 0 1 0 2.828 2.828L16 18.828l2.586 2.586a2 2 0 1 0 2.828-2.828L18.828 16l2.586-2.586a2 2 0 1 0-2.828-2.828L16 13.172l-2.586-2.586Z",clipRule:"evenodd"})),"CloseIcon"),br=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",fill:"none",...e},a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 5a3 3 0 0 0 3 3h2a3 3 0 0 0 3-3h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1Zm0 7a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"}),a.default.createElement("path",{fill:"currentColor",d:"M13 4a1 1 0 1 1 0 2h-2a1 1 0 1 1 0-2h2Z"})),"ClipboardIcon");var q=$(require("react")),ge=require("@refinedev/core");var Cr=t((e,r,s,n)=>{let{resource:o,id:i,resources:l}=(0,ge.useResource)(r),c=s??i,f=(0,ge.useDataProvider)(),[u,g]=q.default.useState(void 0),[P,y]=q.default.useState(void 0),[d,F]=q.default.useState(void 0),[T,p]=q.default.useState(!0),[m,I]=q.default.useState(!1),O=q.default.useCallback(async D=>{var S;let N=Q(o)??ye(o==null?void 0:o.name,void 0,l),A=f(N);I(!0),g(void 0);try{if((e==="list"||e==="create")&&o){let C=await A.getList({resource:o==null?void 0:o.name,meta:_((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getList"])}),k=(S=C.data)==null?void 0:S[0];k||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(k),F(C.data),setTimeout(()=>{I(!1)},500)}if((e==="edit"||e==="show")&&D&&o){let k=(await A.getOne({resource:o==null?void 0:o.name,id:D,meta:_((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getOne"])})).data;k||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(k),setTimeout(()=>{I(!1)},500)}}catch(C){console.warn("An error occured while fetching the resource data. Please check the error message below:",C),g(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${o==null?void 0:o.name}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{I(!1)},500)}},[e,f,o,l]);return q.default.useEffect(()=>{p(!1),!m&&!P&&O(c)},[O,c]),{data:P,datas:d,loading:m,initial:T,error:u}},"useInferFetch");var ee=$(require("react")),kr=require("@refinedev/core");var ze=$(require("lodash/get"));var Ar=t(({record:e,fields:r,infer:s,meta:n})=>{let o=(0,kr.useDataProvider)(),[i,l]=ee.default.useState([]),[c,f]=ee.default.useState(!0),[u,g]=ee.default.useState(!1),P=ee.default.useCallback(async y=>{console.groupCollapsed("@refinedev/inferencer is trying to detect relations");let d=[];g(!0);try{let F=y.map(async p=>{var m,I,O,D;if(p&&(p.relation||p.canRelation)&&e){if(p.relationInfer)return p;let N=Q(p.resource),A=o(N),S=p.multiple,C=Array.isArray(p.accessor)?void 0:p.multiple?e[p.key].map(k=>p.accessor?(0,ze.default)(k,p.accessor):k)[0]:p.accessor?(0,ze.default)(e[p.key],p.accessor):e[p.key];if(C&&p.resource)try{let k={};if(S&&A.getMany){let{data:B}=await A.getMany({resource:p.resource.name,ids:[C],meta:_(((m=p.resource)==null?void 0:m.identifier)??((I=p.resource)==null?void 0:I.name),n,["getMany"])});k=B==null?void 0:B[0]}else{let{data:B}=await A.getOne({resource:p.resource.name,id:C,meta:_(((O=p.resource)==null?void 0:O.identifier)??((D=p.resource)==null?void 0:D.name),n,S?["getMany","getOne"]:["getOne"])});k=B}d.push({status:"success",resource:p.resource.name,field:p.key});let Y=s("__",k,{},s);return{...p,relationInfer:Y}}catch{return d.push({status:"error",resource:p.resource.name,field:p.key}),{...p,relationInfer:null}}if(C){let k,Y;try{let X={};if(S&&A.getMany){let{data:z}=await A.getMany({resource:K(w(p.key)),ids:[C],meta:_(K(w(p.key)),n,["getMany"])});X=z==null?void 0:z[0]}else{let{data:z}=await A.getOne({resource:K(w(p.key)),id:C,meta:_(K(w(p.key)),n,S?["getMany","getOne"]:["getOne"])});X=z}d.push({status:"success",resource:K(w(p.key)),field:p.key}),k=X,Y=!0}catch{d.push({status:"error",resource:K(w(p.key)),field:p.key});let z={};try{if(S&&A.getMany){let{data:W}=await A.getMany({resource:H(w(p.key)),meta:_(H(w(p.key)),n,["getMany"]),ids:[C]});z=W==null?void 0:W[0]}else{let{data:W}=await A.getOne({resource:H(w(p.key)),meta:_(H(w(p.key)),n,S?["getMany","getOne"]:["getOne"]),id:C});z=W}d.push({status:"success",resource:H(w(p.key)),field:p.key}),k=z,Y=!1}catch{return d.push({status:"error",resource:H(w(p.key)),field:p.key}),{...p,relationInfer:null}}}let B=s("__",k,{},s),le=w(p.key);return{...p,relation:!0,type:"relation",resource:{name:Y?K(le):H(le)},fieldable:!1,canRelation:void 0,relationInfer:B}}return{...p,relationInfer:null}}return p}),T=await Promise.all(F);l(T.filter(p=>p)),setTimeout(()=>{g(!1)},500)}catch{setTimeout(()=>{g(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${d.length} attempts and succeeded with ${d.filter(F=>F.status==="success").length} attempts.`),console.groupEnd(),console.info("@refinedev/inferencer may send multiple requests to your API for nonexistent resources when trying to detect relations. To learn more about how the inferencer works, visit https://s.refine.dev/how-inferencer-works")},500)},[o,e]);return ee.default.useEffect(()=>{f(!1),!u&&r&&r.length>0&&i.length===0&&P(r)},[P,u,r,P]),{fields:i,loading:u,initial:c}},"useRelationFetch");var Sr=t(({type:e,additionalScope:r=[],customElements:s=[],fieldTransformers:n=[],renderer:o,loadingComponent:i,errorComponent:l,codeViewerComponent:c})=>{let f=Xe([...ur,...s]),u=er([...xr,...n]),g=t(({resourceName:y,fieldTransformer:d,hideCodeViewerInProduction:F,meta:T,id:p})=>{var _e,Be;let{resource:m,resources:I}=(0,re.useResource)(y),{i18nProvider:O}=(0,R.useContext)(re.TranslationContext),{resource:D}=(0,re.useResource)(),{data:N,datas:A,loading:S,initial:C,error:k}=Cr(e,y??(m==null?void 0:m.name),p,T),Y=t((h,x,M)=>{let V=f(h,x,M,f,e);if(V&&m){let E=u([V],I,m,M,f,e),v=d?E.flatMap(b=>{let L=d(b);return L?[L]:[]}):E;return v==null?void 0:v[0]}},"inferSingleField"),B=t(h=>Object.keys(h).map(M=>{let V=h[M];return Y(M,V,h)}).filter(Boolean),"inferSingleRecord"),le=t(h=>{let x=h.map(b=>B(b)),M=h.flatMap(b=>Object.keys(b)).filter((b,L,ne)=>ne.indexOf(b)===L),V={},E=M.map(b=>{let L=x.map(U=>U.find(Z=>Z.key===b));return L.reduce((U,Z,fe)=>{if(!Z)return U;let oe=L.filter(G=>(G==null?void 0:G.key)===Z.key&&(G==null?void 0:G.type)===Z.type).length;return oe>U.count?(V[b]=h[fe][b],{count:oe,field:Z}):U},{count:0,field:void 0}).field});return{commonRecord:V,inferredFields:E}},"inferMultipleRecords"),[X,z]=R.default.useMemo(()=>{if(A&&(e==="list"||e==="create")){let h=le(A);return[h.inferredFields,h.commonRecord]}if(N){let h=Object.keys(N).map(x=>{let M=N[x];return f(x,M,N,f,e)}).filter(Boolean);if(m){let x=u(h,I,m,N,f,e);return[d?x.flatMap(V=>{let E=d(V);return E?[E]:[]}):x,N]}return[[],N]}return[[],void 0]},[N,A,I,m,d]),{fields:W,loading:te}=Ar({record:z,fields:X,infer:f,meta:T}),He=R.default.useMemo(()=>{let h=[];return W.forEach((x,M,V)=>{if(x.resource){if(h.findIndex(v=>{var b,L;return((b=v.resource)==null?void 0:b.name)===((L=x.resource)==null?void 0:L.name)})>-1)return;let E=V.filter((v,b)=>{var L,ne,U,Z,fe,oe;if(b!==M){let G=x.resource,$r=v.resource,Nr=((L=v.resource)==null?void 0:L.identifier)||((ne=x.resource)==null?void 0:ne.identifier)?((U=v.resource)==null?void 0:U.identifier)===((Z=x.resource)==null?void 0:Z.identifier):((fe=v.resource)==null?void 0:fe.name)===((oe=x.resource)==null?void 0:oe.name);return G&&$r&&Nr}return!1});if(E.length>0)if(e==="create"||e==="edit"){let v;[x,...E].find(b=>{b.fieldable!==!0&&v===void 0&&(v=b)}),v?h.push(v):h.push(x)}else{let v;[x,...E].find(b=>{b.fieldable!==!1&&v===void 0&&(v=b)}),v?h.push(v):h.push(x)}else h.push(x)}else h.push(x)}),h},[W,e]),Ke=R.default.useMemo(()=>!S&&!te&&!C&&m?o({resource:m,resources:I,fields:He,infer:f,meta:T,isCustomPage:m.name!==(D==null?void 0:D.name),id:p,i18n:!!O}):"",[m,I,He,S,te]),Pr=F;return R.default.createElement(R.default.Fragment,null,i&&(S||te)&&R.default.createElement(i,null),!S&&!te&&R.default.createElement(R.default.Fragment,null,R.default.createElement(De,{fetchError:!S&&k?k:!S&&!C&&!N,code:Ae(Ke,pe(((_e=m==null?void 0:m.meta)==null?void 0:_e.label)??((Be=m==null?void 0:m.options)==null?void 0:Be.label)??(m==null?void 0:m.label)??(m==null?void 0:m.name)??"Resource",e)),errorComponent:l,additionalScope:r}),typeof c<"u"&&!Pr?R.default.createElement(c,{code:Se(Ke),loading:S||te}):null))},"Inferencer");return t(({name:y,resource:d,fieldTransformer:F,meta:T,hideCodeViewerInProduction:p,id:m})=>{let{resource:I}=(0,re.useResource)(d??y),O=`${(I==null?void 0:I.identifier)??(I==null?void 0:I.name)}-${e}-${m}`;return R.default.createElement(g,{hideCodeViewerInProduction:p,fieldTransformer:F,resourceName:d??y,meta:T??{},key:O,id:m})},"InferencerComponent")},"createInferencer");
//# sourceMappingURL=index.cjs.map