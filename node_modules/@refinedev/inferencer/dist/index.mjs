"use client"
var hr=Object.defineProperty;var t=(e,r)=>hr(e,"name",{value:r,configurable:!0});import D,{useContext as Yr}from"react";import{useResource as we,TranslationContext as Qr}from"@refinedev/core";var xr=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,Ir=/^(\w|\d|_|-|)*?(name|label){1}$/i,se=t((e,r)=>{let s=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"],o=Object.keys(r).filter(l=>Ir.test(l));s.push(...o),xr.test(e)&&s.unshift("url");let i=s.find(l=>l in r&&!!r[l]);if(i)return i==="firstName"&&"lastName"in r?["firstName","lastName"]:i},"getFieldableKeys");import{pickNotDeprecated as br}from"@refinedev/core";function ce(e,r,s){if(r)return r;let n=s==null?void 0:s.find(i=>i.name===e),o=br(n==null?void 0:n.meta,n==null?void 0:n.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"}t(ce,"pickDataProvider");var Q=t(e=>{var r;return(r=e==null?void 0:e.options)==null?void 0:r.dataProviderName},"dataProviderFromResource");var le=t(e=>{let r=[...e].filter(Boolean).sort((s,n)=>(n.priority||0)-(s.priority||0))[0];return r||null},"pickInferredField");import vr from"prettier/standalone";import wr from"prettier/parser-typescript";var fe=t(e=>{try{return vr.format(e,{parser:"typescript",plugins:[wr],arrowParens:"always",trailingComma:"all",semi:!0,tabWidth:4,printWidth:80})}catch(r){return console.warn("Formatting error in inferencer",r),e}},"prettierFormat");var Se=t(e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`),"prettySpaces");var de=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,Pe=t((e,r)=>{let s=de.test(e),n=typeof r=="string"||typeof r=="number",o=Array.isArray(r)&&r.every(i=>typeof i=="string"||typeof i=="number");return s&&n||s&&o?{key:e,relation:!0,multiple:o,type:"relation",priority:1}:!1},"relationInfer");var k=t(e=>e.replace(de,""),"removeRelationSuffix");var J=t(e=>k(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),"prettyString");import $e from"pluralize";var z=t((e="")=>$e.isSingular(e)?e:$e.singular(e),"toSingular");import Ne from"pluralize";var H=t((e="")=>Ne.isPlural(e)?e:Ne.plural(e),"toPlural");var ue=t(e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(o=>!o.trim().startsWith("export default")).join(`
`),"replaceExports");var Re=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Fr=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Cr=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,me=t((e,r={})=>{let s=e.matchAll(Re),n=new Set;for(let o of s){let[,i,l,c,f]=o;if(f in r){let u=r[f];if(f==="react")continue;i&&n.add(`const { default: ${i} } = ${u};`),l&&n.add(`const${l.replace(Cr,"$1: $3$4")} = ${u};`),c&&n.add(`const ${c} = ${u};`)}}return Se(`
    ${Array.from(n).join(`
`)}
    ${e.replace(Re,"").replace(Fr,"")}
    `)},"replaceImports");import ie from"pluralize";var ge=t((e,r)=>e?r.find(n=>{let o=k(e.key);return n.name===o||n.name===(ie.isPlural(o)?o:ie.plural(o))||n.name===(ie.isSingular(o)?o:ie.singular(o))}):void 0,"resourceFromInferred");import kr from"pluralize";var ae=t((e,r,s="Inferred")=>{let n=e.replace(/[^a-zA-Z0-9]/g," "),o=kr.singular(n),l=J(o).replace(/ /g,"")||s,c=r.charAt(0).toUpperCase()+r.slice(1);return/^[a-zA-Z]/.test(l)?`${l}${c}`:`${c}${l}`},"componentName");var Ar=t(e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"","handleExpression"),Te=t((e,...r)=>e.reduce((n,o,i)=>`${n}${o}${Ar(r[i])}`,"").trim(),"jsx");var ye=t((e,r)=>`
    ${e??""}
    
    render(typeof ${r} !== "undefined" ? <${r} /> : <></>);
    `,"prepareLiveCode");var he=t(e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,""),"removeHiddenCode");var Sr=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,pe=t(e=>Sr.test(e),"shouldDotAccess");function xe(e,r,s){let n=`${e}`;return r&&(n+="?.",pe(r)?n+=r:n+=`['${r}']`),s&&(n+="?.",pe(s)?n+=s:n+=`['${s}']`),n}t(xe,"accessorSingle");function Pr(e,r,s){return(s??[]).map(o=>xe(e,r,o))}t(Pr,"accessorMultiple");var Le=t((e,r,s,n=' + " " + ')=>Array.isArray(s)?n?Pr(e,r,s).join(n):xe(e,r,s[0]):xe(e,r,s),"accessor"),Ie=t((e,r,s)=>{let n=e;return r&&(n+=`.${r}`),s&&(Array.isArray(s)?n+=`.${s[0]}`:n+=`.${s}`),n},"dotAccessor"),Me=t(e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${Ie(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`,"getAccessorKey");var Ve=t(e=>{let r=e.reduce((n,[o,i,l])=>(n[i]||(n[i]=[]),n[i].includes(o)||(l?n[i].push([o,!0]):n[i].push(o)),n),{});return Object.entries(r).map(([n,o])=>{let i=o.find(u=>Array.isArray(u)&&u[1]),l=o.filter(u=>typeof u=="string"),c=i?`${i[0]}`:"",f=l.length?`{ ${l.join(", ")} }`:"";return`import ${c}${c&&f?", ":""}${f} from "${n}";`})},"printImports");var $r=/^id$/i,Ee=t(e=>$r.test(e),"isIDKey");var je=t(e=>{var r;return e.relationInfer&&(r=e.relationInfer)!=null&&r.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":""},"getOptionLabel");var Oe=t(e=>{},"noOp");var De=t((e,r="")=>{if(Number.isInteger(Number(e)))return r.charAt(0).toLowerCase()+r.slice(1)+e;let n=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),o=J(n).replace(/ /g,"");return`${o.charAt(0).toLowerCase()+o.slice(1)}${r.charAt(0).toUpperCase()+r.slice(1)}`},"getVariableName");var K=t((e,r,s)=>{if(r&&s&&e){let n=e?r[e]:{},i=[...s,"default"].reduce((l,c)=>l??(n==null?void 0:n[c]),void 0);if(i)return i}},"pickMeta");var ze=t(e=>e===void 0?e:typeof e=="string"?`"${e}"`:e,"idQuoteWrapper");var He=t(e=>{let r=t((s,n,o,i=r,l)=>{let c=e.map(u=>u(s,n,o,i,l));return le(c)},"fieldInferencer");return r},"composeInferencers");var Ke=t(e=>t((s,n,o,i,l,c)=>e.reduce((f,u)=>u(f,n,o,i,l,c),s),"fieldTransformer"),"composeTransformers");var _e=t((e,r,s,n,o)=>{let i=Array.isArray(r),l=Array.isArray(r)&&r.every(c=>typeof c=="string"||typeof c=="number");if(i){if(!l){let f=n(e,r[0],s,n,o);return f?{...f,key:e,multiple:!0,priority:1}:!1}let c=n(e,r[0],s,n,o)||{type:"string"};return{key:e,multiple:!0,priority:1,type:c==null?void 0:c.type}}return!1},"arrayInfer");var Be=t((e,r)=>typeof r=="boolean"?{key:e,type:"boolean"}:!1,"booleanInfer");import We from"dayjs";var Nr=/(_at|_on|At|On|AT|ON)(\[\])?$/,Rr=["/",":","-","."],Ze=t((e,r)=>{let s=Nr.test(e)&&We(r).isValid(),n=typeof r=="string"&&We(r).isValid();return typeof r=="string"&&Rr.some(i=>r.includes(i))&&(s||n)?{key:e,type:"date",priority:1}:!1},"dateInfer");var Tr=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ue=t((e,r)=>typeof r=="string"&&Tr.test(r)?{key:e,type:"email",priority:1}:!1,"emailInfer");var Lr=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,Ge=t((e,r)=>typeof r=="string"&&Lr.test(r)?{key:e,type:"image",priority:2}:!1,"imageInfer");var qe=t((e,r)=>typeof r>"u"||r===null?null:!1,"nullishInfer");var Ye=t((e,r)=>{let s=typeof r=="string"&&r.length>0,n=!Number.isNaN(Number(r));return s&&n||typeof r=="number"?{key:e,type:"number"}:!1},"numberInfer");var Qe=/id$/i,Je=t((e,r,s,n,o)=>{let i=r!==null,l=!Array.isArray(r);if(i&&l&&typeof r=="object"){let f=Object.keys(r).length===1&&Qe.test(Object.keys(r)[0]),u=Object.keys(r).some(y=>Qe.test(y));if(f)return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let g=se(e,r);if((g?g.length>0:!1)&&g){let y=g&&Array.isArray(g)?g[0]:g,d=n(y,r[y],r,n,o);if(d){let w=Array.isArray(g)?g.map(N=>d.accessor?`${N}.${Array.isArray(d.accessor)?d.accessor[0]:d.accessor}`:N):d.accessor?Array.isArray(d.accessor)?`${g}.${d.accessor[0]}`:`${g}.${d.accessor}`:g;return(d==null?void 0:d.type)==="text"&&(o==="create"||o==="edit")&&u?{key:e,type:"relation",relation:!0,accessor:"id",priority:1}:{...d,fieldable:!0,key:e,accessor:w,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1},"objectInfer");var Xe=t((e,r)=>typeof r=="string"&&r.length>100?{key:e,type:"richtext",priority:1}:!1,"richtextInfer");var er=t((e,r)=>typeof r=="string"?{key:e,type:"text"}:!1,"textInfer");var Mr=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,rr=t((e,r)=>typeof r=="string"&&Mr.test(r)?{key:e,type:"url",priority:1}:!1,"urlInfer");var tr=[_e,Be,Ze,Ue,Ge,qe,Ye,Je,Pe,Xe,er,rr];var nr=t((e,r,s,n)=>e.map(i=>{if(!i.relation&&(i.type==="text"||i.type==="richtext"||i.type==="number")&&!i.canRelation){let l=/^[a-z0-9-]+$/,c=t(y=>l.test(`${y}`),"isValidUUID"),f=i.key.toLowerCase()!=="id";return!(!i.accessor||typeof i.accessor=="string")||!f?i:(i.multiple?n[i.key]:[n[i.key]]).every(y=>c(i.accessor?y[i.accessor]:y))?{...i,canRelation:!0}:i}return i}),"basicToRelation");var Vr=/(image|photo|avatar|cover|thumbnail|icon)/i,or=t(e=>e.map(s=>s.type==="url"&&Vr.test(s.key)?{...s,type:"image"}:s),"imageByKey");var sr=t((e,r)=>e.map(n=>{let o=ge(n,r);return o?{...n,relation:!0,type:"relation",resource:o}:n}),"relationByResource");var ir=t((e,r,s,n,o,i)=>e.map(c=>{if(c.relation&&c.type==="relation"&&!c.resource){let f=c.accessor?n[c.key][c.accessor]:n[c.key],u=o(c.key,f,n,o,i);if(u&&u.type!=="relation")return{...c,fieldable:!0,relation:!1,type:u.type,canRelation:!0}}return c}),"relationToFieldable");var ar=[or,sr,ir,nr];import O from"react";import*as Er from"@refinedev/core";import*as jr from"graphql-tag";import{LivePreview as Or,LiveProvider as Dr}from"@aliemir/react-live";var pr=[["react","React",O],["@refinedev/core","RefineCore",Er],["graphql-tag","GraphqlTag",jr]],be=O.createContext({}),ve=t(({fetchError:e,code:r,additionalScope:s,errorComponent:n})=>{let o=(r&&ue(me(r,[...pr,...s??[]].reduce((c,[f,u,g,P])=>P?c:{...c,[f]:u},{}))))??"",i=O.useMemo(()=>({React:O,...O,...[...pr,...s??[]].reduce((c,[f,u,g])=>({...c,[u]:g}),{})}),[s]),l=O.useMemo(()=>t(()=>{let{error:f}=O.useContext(be);return n?O.createElement(n,{error:f?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${f}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},"LiveErrorComponent"),[n,e]);return O.createElement(Dr,{Context:be,code:o,scope:i,noInline:!0},!e&&O.createElement(Or,{Context:be}),O.createElement(l,null))},"LiveComponent");import p from"react";import zr,{defaultProps as Hr}from"prism-react-renderer";import Kr from "prism-react-renderer/themes/vsDark/index.js";var _r=t(({code:e,loading:r})=>{let s=p.useMemo(()=>fe(e??""),[e]),[n,o]=p.useState(!1),[i,l]=p.useState(!1),[c,f]=p.useState(!1),[u,g]=p.useState(!1),[P,y]=p.useState(!1);return p.useEffect(()=>{if(!r){let d=setTimeout(()=>{o(!0)},300);return()=>{clearTimeout(d)}}return()=>{}},[r]),p.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 449px)");d.matches?f(!1):f(!0);let w=t(()=>{d.matches?f(!1):f(!0)},"handleResize");return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}}return()=>{}},[]),p.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 1280px)");d.matches?g(!0):g(!1);let w=t(()=>{d.matches?g(!0):g(!1)},"handleResize");return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}}return()=>{}},[]),s&&!r?p.createElement(p.Fragment,null,c&&p.createElement("div",{className:"refine-inferencer--code-viewer",style:{position:"sticky",bottom:"24px",paddingTop:"24px",left:0,right:0,width:"100%",zIndex:10,display:"flex",justifyContent:"center",transition:"all 0.2s ease",opacity:n&&!i?1:0,transform:n&&!i?"translateY(0)":"translateY(100px)"}},p.createElement("div",{style:{width:"calc(100% - calc(64px * 2))",maxWidth:"1080px",padding:"20px",backgroundColor:"#1A1A1A",boxShadow:"0px 4px 16px -4px rgba(0, 0, 0, 0.5), 0px 8px 32px -8px rgba(0, 0, 0, 0.35)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:u?"column":"row",gap:"12px"}},p.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"}},p.createElement("div",null,p.createElement(Wr,null)),p.createElement("div",{style:{fontSize:"14px",lineHeight:"20px",color:"#ffffff"}},p.createElement("p",{style:{padding:0,margin:0}},"Most of the page code is auto-generated by the"," ",p.createElement("span",{style:{textDecoration:"underline"}},"Inferencer")," ","feature, based on your backend data structure."),p.createElement("p",{style:{padding:0,margin:0}},"While this is an excellent way to experiment with refine,"," ",p.createElement("span",{style:{fontWeight:600}},"it's not intended to be used on production.")))),p.createElement("div",null,p.createElement("button",{onPointerEnter:()=>y(!0),onPointerLeave:()=>y(!1),onClick:()=>l(!0),style:{appearance:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:P?"scale(1.025)":void 0,filter:P?"brightness(1.1)":void 0}},p.createElement(lr,{style:{flexShrink:0}}),p.createElement("span",null,"Show the auto-generated code"))))),p.createElement(Br,{visible:i,onClose:()=>l(!1),code:s})):null},"SharedCodeViewer"),Br=t(({visible:e,onClose:r,code:s=""})=>{let n=p.useRef(null),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[f,u]=p.useState(!1),[g,P]=p.useState(!1);p.useEffect(()=>{if(typeof document<"u"){let a=t(m=>{n.current&&!n.current.contains(m.target)&&r()},"onOutsideClick");return document.addEventListener("pointerdown",a),()=>{document.removeEventListener("pointerdown",a)}}return()=>{}},[r]);let y=t(()=>{typeof navigator<"u"&&(navigator.clipboard.writeText(s),i(!0),setTimeout(()=>{i(!1)},1e3))},"onCopy"),d=p.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},p.createElement("div",{style:{fontWeight:700,fontSize:"20px",lineHeight:"32px",color:"#0D0D0D"}},"Auto-generated code by Inferencer"),p.createElement("button",{onClick:r,onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),style:{flexShrink:0,appearance:"none",border:"none",background:"none",padding:0,margin:0,outline:"none",borderRadius:"50px",width:"32px",height:"32px",cursor:"pointer",transition:"all 0.15s ease",transform:f?"scale(1.05)":void 0,filter:f?"brightness(0.8)":void 0}},p.createElement(Zr,null))),w=p.createElement("div",{style:{fontSize:"13px",borderRadius:"8px",flex:"1",overflow:"scroll",background:"#1E1E1E"}},p.createElement(zr,{...Hr,theme:Kr,code:s,language:"tsx"},({className:a,style:m,tokens:I,getLineProps:V,getTokenProps:E})=>p.createElement("pre",{className:a,style:{...m,padding:"14px 14px 14px 14px",margin:"0",width:"100%",boxSizing:"border-box"}},I.map(($,A)=>p.createElement("div",{key:A,...V({line:$,key:A})},$.map((S,F)=>p.createElement("span",{key:F,...E({token:S,key:F})})))))));return p.createElement("div",{className:"refine-inferencer--code-viewer-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"all 0.2s ease",opacity:e?1:0,pointerEvents:e?"all":"none",display:"flex",justifyContent:"center",alignItems:"center"}},p.createElement("div",{ref:n,style:{transform:e?"scale(1) translateY(0px)":"scale(0) translateY(-200px)",transition:"all 0.25s cubic-bezier(.35,1.29,.81,1.08)",transitionDelay:"0.25",width:"calc(100% - calc(32px * 2))",height:"calc(100% - calc(32px * 2))",backgroundColor:"#fff",maxWidth:"640px",maxHeight:"720px",borderRadius:"8px",padding:"16px"}},p.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",gap:"16px"}},d,w,p.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",gap:"16px"}},p.createElement("button",{onPointerEnter:()=>c(!0),onPointerLeave:()=>c(!1),onClick:y,style:{appearance:"none",height:"40px",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",position:"relative",overflow:"hidden",transition:"filter 0.2s ease",transform:l?"scale(1.025)":"scale(1)",filter:l?"brightness(1.1)":void 0}},p.createElement(cr,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),p.createElement("span",null,"Copy Generated Code"),p.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",transition:"all 0.2s ease",transform:o?"translateY(0)":"translateY(40px)"}},p.createElement(cr,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),p.createElement("span",null,"Copied!"))),p.createElement("a",{onPointerEnter:()=>P(!0),onPointerLeave:()=>P(!1),href:"https://refine.dev/docs/packages/documentation/inferencer",target:"_blank",rel:"noreferrer",style:{appearance:"none",textDecoration:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 128, 255, 0.1)",color:"#0080FF",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:g?"scale(1.025)":void 0,filter:g?"brightness(1.1)":void 0}},p.createElement(lr,{style:{flexShrink:0}}),p.createElement("span",null,"Learn more about inferencer"))))))},"CodeModal"),Wr=t(e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...e},p.createElement("path",{fill:"#0080FF",fillRule:"evenodd",d:"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10Zm0-15a1.25 1.25 0 1 0 0 2.5A1.25 1.25 0 0 0 10 5Zm0 10c.69 0 1.25-.56 1.25-1.25V10a1.25 1.25 0 1 0-2.5 0v3.75c0 .69.56 1.25 1.25 1.25Z",clipRule:"evenodd"})),"InfoIcon"),lr=t(e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},p.createElement("path",{fill:"currentColor",d:"M5 2a1 1 0 0 1 0 2H4v8h8v-1a1 1 0 1 1 2 0v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1Z"}),p.createElement("path",{fill:"currentColor",d:"M9 2a1 1 0 0 0 0 2h1.586L6.293 8.293a1 1 0 0 0 1.414 1.414L12 5.414V7a1 1 0 1 0 2 0V3a1 1 0 0 0-1-1H9Z"})),"OpenIcon"),Zr=t(e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e},p.createElement("path",{fill:"#A6A6A6",fillRule:"evenodd",d:"M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16Zm-2.586-21.414a2 2 0 1 0-2.828 2.828L13.172 16l-2.586 2.586a2 2 0 1 0 2.828 2.828L16 18.828l2.586 2.586a2 2 0 1 0 2.828-2.828L18.828 16l2.586-2.586a2 2 0 1 0-2.828-2.828L16 13.172l-2.586-2.586Z",clipRule:"evenodd"})),"CloseIcon"),cr=t(e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",fill:"none",...e},p.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 5a3 3 0 0 0 3 3h2a3 3 0 0 0 3-3h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1Zm0 7a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"}),p.createElement("path",{fill:"currentColor",d:"M13 4a1 1 0 1 1 0 2h-2a1 1 0 1 1 0-2h2Z"})),"ClipboardIcon");import q from"react";import{useDataProvider as Ur,useResource as Gr}from"@refinedev/core";var fr=t((e,r,s,n)=>{let{resource:o,id:i,resources:l}=Gr(r),c=s??i,f=Ur(),[u,g]=q.useState(void 0),[P,y]=q.useState(void 0),[d,w]=q.useState(void 0),[N,a]=q.useState(!0),[m,I]=q.useState(!1),V=q.useCallback(async E=>{var S;let $=Q(o)??ce(o==null?void 0:o.name,void 0,l),A=f($);I(!0),g(void 0);try{if((e==="list"||e==="create")&&o){let F=await A.getList({resource:o==null?void 0:o.name,meta:K((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getList"])}),C=(S=F.data)==null?void 0:S[0];C||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(C),w(F.data),setTimeout(()=>{I(!1)},500)}if((e==="edit"||e==="show")&&E&&o){let C=(await A.getOne({resource:o==null?void 0:o.name,id:E,meta:K((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getOne"])})).data;C||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(C),setTimeout(()=>{I(!1)},500)}}catch(F){console.warn("An error occured while fetching the resource data. Please check the error message below:",F),g(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${o==null?void 0:o.name}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{I(!1)},500)}},[e,f,o,l]);return q.useEffect(()=>{a(!1),!m&&!P&&V(c)},[V,c]),{data:P,datas:d,loading:m,initial:N,error:u}},"useInferFetch");import te from"react";import{useDataProvider as qr}from"@refinedev/core";import dr from"lodash-es/get.js";var ur=t(({record:e,fields:r,infer:s,meta:n})=>{let o=qr(),[i,l]=te.useState([]),[c,f]=te.useState(!0),[u,g]=te.useState(!1),P=te.useCallback(async y=>{console.groupCollapsed("@refinedev/inferencer is trying to detect relations");let d=[];g(!0);try{let w=y.map(async a=>{var m,I,V,E;if(a&&(a.relation||a.canRelation)&&e){if(a.relationInfer)return a;let $=Q(a.resource),A=o($),S=a.multiple,F=Array.isArray(a.accessor)?void 0:a.multiple?e[a.key].map(C=>a.accessor?dr(C,a.accessor):C)[0]:a.accessor?dr(e[a.key],a.accessor):e[a.key];if(F&&a.resource)try{let C={};if(S&&A.getMany){let{data:_}=await A.getMany({resource:a.resource.name,ids:[F],meta:K(((m=a.resource)==null?void 0:m.identifier)??((I=a.resource)==null?void 0:I.name),n,["getMany"])});C=_==null?void 0:_[0]}else{let{data:_}=await A.getOne({resource:a.resource.name,id:F,meta:K(((V=a.resource)==null?void 0:V.identifier)??((E=a.resource)==null?void 0:E.name),n,S?["getMany","getOne"]:["getOne"])});C=_}d.push({status:"success",resource:a.resource.name,field:a.key});let G=s("__",C,{},s);return{...a,relationInfer:G}}catch{return d.push({status:"error",resource:a.resource.name,field:a.key}),{...a,relationInfer:null}}if(F){let C,G;try{let Y={};if(S&&A.getMany){let{data:j}=await A.getMany({resource:H(k(a.key)),ids:[F],meta:K(H(k(a.key)),n,["getMany"])});Y=j==null?void 0:j[0]}else{let{data:j}=await A.getOne({resource:H(k(a.key)),id:F,meta:K(H(k(a.key)),n,S?["getMany","getOne"]:["getOne"])});Y=j}d.push({status:"success",resource:H(k(a.key)),field:a.key}),C=Y,G=!0}catch{d.push({status:"error",resource:H(k(a.key)),field:a.key});let j={};try{if(S&&A.getMany){let{data:B}=await A.getMany({resource:z(k(a.key)),meta:K(z(k(a.key)),n,["getMany"]),ids:[F]});j=B==null?void 0:B[0]}else{let{data:B}=await A.getOne({resource:z(k(a.key)),meta:K(z(k(a.key)),n,S?["getMany","getOne"]:["getOne"]),id:F});j=B}d.push({status:"success",resource:z(k(a.key)),field:a.key}),C=j,G=!1}catch{return d.push({status:"error",resource:z(k(a.key)),field:a.key}),{...a,relationInfer:null}}}let _=s("__",C,{},s),ne=k(a.key);return{...a,relation:!0,type:"relation",resource:{name:G?H(ne):z(ne)},fieldable:!1,canRelation:void 0,relationInfer:_}}return{...a,relationInfer:null}}return a}),N=await Promise.all(w);l(N.filter(a=>a)),setTimeout(()=>{g(!1)},500)}catch{setTimeout(()=>{g(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${d.length} attempts and succeeded with ${d.filter(w=>w.status==="success").length} attempts.`),console.groupEnd(),console.info("@refinedev/inferencer may send multiple requests to your API for nonexistent resources when trying to detect relations. To learn more about how the inferencer works, visit https://s.refine.dev/how-inferencer-works")},500)},[o,e]);return te.useEffect(()=>{f(!1),!u&&r&&r.length>0&&i.length===0&&P(r)},[P,u,r,P]),{fields:i,loading:u,initial:c}},"useRelationFetch");var Jr=t(({type:e,additionalScope:r=[],customElements:s=[],fieldTransformers:n=[],renderer:o,loadingComponent:i,errorComponent:l,codeViewerComponent:c})=>{let f=He([...tr,...s]),u=Ke([...ar,...n]),g=t(({resourceName:y,fieldTransformer:d,hideCodeViewerInProduction:w,meta:N,id:a})=>{var ke,Ae;let{resource:m,resources:I}=we(y),{i18nProvider:V}=Yr(Qr),{resource:E}=we(),{data:$,datas:A,loading:S,initial:F,error:C}=fr(e,y??(m==null?void 0:m.name),a,N),G=t((h,x,T)=>{let L=f(h,x,T,f,e);if(L&&m){let M=u([L],I,m,T,f,e),v=d?M.flatMap(b=>{let R=d(b);return R?[R]:[]}):M;return v==null?void 0:v[0]}},"inferSingleField"),_=t(h=>Object.keys(h).map(T=>{let L=h[T];return G(T,L,h)}).filter(Boolean),"inferSingleRecord"),ne=t(h=>{let x=h.map(b=>_(b)),T=h.flatMap(b=>Object.keys(b)).filter((b,R,ee)=>ee.indexOf(b)===R),L={},M=T.map(b=>{let R=x.map(Z=>Z.find(W=>W.key===b));return R.reduce((Z,W,oe)=>{if(!W)return Z;let re=R.filter(U=>(U==null?void 0:U.key)===W.key&&(U==null?void 0:U.type)===W.type).length;return re>Z.count?(L[b]=h[oe][b],{count:re,field:W}):Z},{count:0,field:void 0}).field});return{commonRecord:L,inferredFields:M}},"inferMultipleRecords"),[Y,j]=D.useMemo(()=>{if(A&&(e==="list"||e==="create")){let h=ne(A);return[h.inferredFields,h.commonRecord]}if($){let h=Object.keys($).map(x=>{let T=$[x];return f(x,T,$,f,e)}).filter(Boolean);if(m){let x=u(h,I,m,$,f,e);return[d?x.flatMap(L=>{let M=d(L);return M?[M]:[]}):x,$]}return[[],$]}return[[],void 0]},[$,A,I,m,d]),{fields:B,loading:X}=ur({record:j,fields:Y,infer:f,meta:N}),Fe=D.useMemo(()=>{let h=[];return B.forEach((x,T,L)=>{if(x.resource){if(h.findIndex(v=>{var b,R;return((b=v.resource)==null?void 0:b.name)===((R=x.resource)==null?void 0:R.name)})>-1)return;let M=L.filter((v,b)=>{var R,ee,Z,W,oe,re;if(b!==T){let U=x.resource,gr=v.resource,yr=((R=v.resource)==null?void 0:R.identifier)||((ee=x.resource)==null?void 0:ee.identifier)?((Z=v.resource)==null?void 0:Z.identifier)===((W=x.resource)==null?void 0:W.identifier):((oe=v.resource)==null?void 0:oe.name)===((re=x.resource)==null?void 0:re.name);return U&&gr&&yr}return!1});if(M.length>0)if(e==="create"||e==="edit"){let v;[x,...M].find(b=>{b.fieldable!==!0&&v===void 0&&(v=b)}),v?h.push(v):h.push(x)}else{let v;[x,...M].find(b=>{b.fieldable!==!1&&v===void 0&&(v=b)}),v?h.push(v):h.push(x)}else h.push(x)}else h.push(x)}),h},[B,e]),Ce=D.useMemo(()=>!S&&!X&&!F&&m?o({resource:m,resources:I,fields:Fe,infer:f,meta:N,isCustomPage:m.name!==(E==null?void 0:E.name),id:a,i18n:!!V}):"",[m,I,Fe,S,X]),mr=w;return D.createElement(D.Fragment,null,i&&(S||X)&&D.createElement(i,null),!S&&!X&&D.createElement(D.Fragment,null,D.createElement(ve,{fetchError:!S&&C?C:!S&&!F&&!$,code:ye(Ce,ae(((ke=m==null?void 0:m.meta)==null?void 0:ke.label)??((Ae=m==null?void 0:m.options)==null?void 0:Ae.label)??(m==null?void 0:m.label)??(m==null?void 0:m.name)??"Resource",e)),errorComponent:l,additionalScope:r}),typeof c<"u"&&!mr?D.createElement(c,{code:he(Ce),loading:S||X}):null))},"Inferencer");return t(({name:y,resource:d,fieldTransformer:w,meta:N,hideCodeViewerInProduction:a,id:m})=>{let{resource:I}=we(d??y),V=`${(I==null?void 0:I.identifier)??(I==null?void 0:I.name)}-${e}-${m}`;return D.createElement(g,{hideCodeViewerInProduction:a,fieldTransformer:w,resourceName:d??y,meta:N??{},key:V,id:m})},"InferencerComponent")},"createInferencer");export{_r as SharedCodeViewer,Le as accessor,ae as componentName,Jr as createInferencer,Q as dataProviderFromResource,Ie as dotAccessor,Me as getAccessorKey,se as getFieldableKeys,je as getOptionLabel,De as getVariableName,ze as idQuoteWrapper,Ee as isIDKey,Te as jsx,Oe as noOp,J as prettyString,Ve as printImports,k as removeRelationSuffix,pe as shouldDotAccess,H as toPlural,z as toSingular};
//# sourceMappingURL=index.mjs.map